(()=>{const e=document.getElementById("email");document.getElementById("email_form").addEventListener("submit",(t=>{t.preventDefault();const n=document.querySelector("#email").value;var r,o;n&&(r=n,(o=new FormData).append("email",r),fetch("/newsletter/subscribe",{method:"POST",body:o,headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value}}).then((e=>e.json())).then((t=>{document.querySelector(".success").innerHTML=t.msg,e.value=""})).catch((e=>{console.log(e)})))})),e.addEventListener("input",(t=>{t.preventDefault();!function(t){var n=new FormData;n.append("email",t),fetch("/newsletter/validate_email",{method:"POST",body:n,headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value}}).then((e=>e.json())).then((t=>{var n;t.is_valid?(document.querySelector(".form-error").innerHTML="",e.setCustomValidity("")):(document.querySelector(".form-error").innerHTML=t.msg,n=t.msg,e.setCustomValidity(n))})).catch((e=>{console.log(e)}))}(t.target.value)}))})();